---
- name: Run Oracle SQL script on Windows server
  hosts: oracle_windows
  gather_facts: no
  vars_files:
    - "../vars/common.var"
  tasks:
    - name: Run SQL*Plus with script
      win_shell: |
        sqlplus {{ db_username }}/{{ db_password }}@{{ db_host }}:{{ db_port }}/{{ db_svc }} @{{ script_path }}\{{ file_name }}
      register: sqlplus_output

    - name: Show output
      debug:
        var: sqlplus_output.stdout
